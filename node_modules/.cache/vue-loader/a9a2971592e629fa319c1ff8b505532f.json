{"remainingRequest":"/Users/alex/Documents/HS/basketballbackend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alex/Documents/HS/basketballbackend/src/views/Cash.vue?vue&type=style&index=0&id=be114626&scoped=true&lang=css&","dependencies":[{"path":"/Users/alex/Documents/HS/basketballbackend/src/views/Cash.vue","mtime":1662167923918},{"path":"/Users/alex/Documents/HS/basketballbackend/node_modules/css-loader/dist/cjs.js","mtime":1662170097783},{"path":"/Users/alex/Documents/HS/basketballbackend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1662170098278},{"path":"/Users/alex/Documents/HS/basketballbackend/node_modules/postcss-loader/src/index.js","mtime":1662170097902},{"path":"/Users/alex/Documents/HS/basketballbackend/node_modules/cache-loader/dist/cjs.js","mtime":1662170097529},{"path":"/Users/alex/Documents/HS/basketballbackend/node_modules/vue-loader/lib/index.js","mtime":1662170098083}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouaG9tZS1jb250YWluZXIgewogIHBhZGRpbmc6IDEwcHg7CiAgcGFkZGluZy10b3A6IDVweDsKfQouaG9tZS1jb250ZW50IHsKICBwYWRkaW5nOiAxMHB4OwogIGJvcmRlci1yYWRpdXM6IDVweDsKICBiYWNrZ3JvdW5kOiAjZmZmOwp9Cg=="},{"version":3,"sources":["Cash.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cash.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"home-container\">\n    <div class=\"home-content\">\n      <el-table :data=\"newData\" fit border style=\"margin-top: 10px\">\n        <el-table-column prop=\"price\" label=\"充值金额\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-input type=\"number\" v-model=\"scope.row.recharge\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"price\" label=\"赠送金额\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-input type=\"number\" v-model=\"scope.row.handsel\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"150\">\n          <template slot-scope=\"scope\">\n            <el-button\n              @click=\"handleAdd(scope.row)\"\n              size=\"mini\"\n              type=\"primary\"\n              icon=\"el-icon-circle-plus\"\n              >新增</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-table\n        :data=\"datas\"\n        :default-sort=\"{ prop: 'price' }\"\n        height=\"450\"\n        border\n        style=\"margin-top: 10px\"\n      >\n        <el-table-column prop=\"price\" label=\"充值金额\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-input type=\"number\" v-model=\"scope.row.recharge\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"value\" label=\"赠送金额\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-input type=\"number\" v-model=\"scope.row.handsel\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"150\">\n          <template slot-scope=\"scope\">\n            <el-button @click=\"handleEdit(scope.row)\" size=\"mini\"\n              >保存</el-button\n            >\n            <el-button\n              @click=\"handleDelete(scope.row)\"\n              size=\"mini\"\n              type=\"danger\"\n              >删除</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable quotes */\n/* eslint-disable indent */\n/* eslint-disable semi */\n/* eslint-disable radix */\n/* eslint-disable no-underscore-dangle */\nimport { getDatas, updateInfo, deleteInfo, addInfo } from \"@/api\";\n\nexport default {\n  name: \"home\",\n  data() {\n    return {\n      datas: [],\n      newData: [{}],\n      collection: \"cash\",\n    };\n  },\n  created() {\n    getDatas(this.$data.collection).then((res) => {\n      this.$data.datas = res.data;\n    });\n  },\n  methods: {\n    handleEdit(info) {\n      this.$confirm(\"是否提交修改\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          info.recharge = parseInt(info.recharge);\n          info.handsel = parseInt(info.handsel);\n          updateInfo(info, this.$data.collection).then((res) => {\n            console.log(res);\n            if (res.updated == 1) {\n              this.$message({\n                type: \"success\",\n                message: \"已保存!请刷新页面\",\n              });\n              getDatas(this.$data.collection).then((res) => {\n                this.$data.datas = res.data;\n              });\n            } else {\n              this.$message({\n                type: \"fail\",\n                message: \"保存失败!\",\n              });\n            }\n          });\n        })\n        .catch((err) => {\n          console.log(err);\n          this.$router.go(0);\n          this.$message({\n            type: \"info\",\n            message: \"保存失败\",\n          });\n        });\n    },\n    handleDelete(info) {\n      this.$confirm(\"是否删除当前充值信息\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      }).then(() => {\n        deleteInfo(info, \"recharge\").then(() => {\n          this.$router.go(0);\n        });\n      });\n    },\n    handleAdd(info) {\n      const that = this;\n      console.log(info);\n      addInfo(info, this.$data.collection).then((res) => {\n        console.log(res);\n        if (res.id) {\n          this.$message({\n            type: \"success\",\n            message: \"新增成功!\",\n          });\n          that.$router.go(0);\n        } else {\n          this.$message({\n            type: \"info\",\n            message: \"新增失败!\",\n          });\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.home-container {\n  padding: 10px;\n  padding-top: 5px;\n}\n.home-content {\n  padding: 10px;\n  border-radius: 5px;\n  background: #fff;\n}\n</style>"]}]}