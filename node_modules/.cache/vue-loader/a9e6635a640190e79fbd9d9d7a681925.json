{"remainingRequest":"/Users/alex/Documents/BasketballPark/basketballbackend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alex/Documents/BasketballPark/basketballbackend/src/views/vip/vipCourt.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alex/Documents/BasketballPark/basketballbackend/src/views/vip/vipCourt.vue","mtime":1664971463856},{"path":"/Users/alex/Documents/BasketballPark/basketballbackend/node_modules/cache-loader/dist/cjs.js","mtime":1662170097529},{"path":"/Users/alex/Documents/BasketballPark/basketballbackend/node_modules/babel-loader/lib/index.js","mtime":1662170097912},{"path":"/Users/alex/Documents/BasketballPark/basketballbackend/node_modules/cache-loader/dist/cjs.js","mtime":1662170097529},{"path":"/Users/alex/Documents/BasketballPark/basketballbackend/node_modules/vue-loader/lib/index.js","mtime":1662170098083}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgICBnZXRDb2xsZWN0aW9uQ291bnRXaXRoUGFyYW0sCiAgICBnZXRDb2xsZWN0aW9uc0J5UGFnZVdpdGhQYXJhbUFuZE9yZGVyLAogICAgZGVsZXRlSW5mbywKICAgIGdldERhdGFzQnlPcmRlciwKICAgIGFkZEluZm8sCiAgICBjYWxsQ2xvdWRGdW5jdGlvbgp9IGZyb20gIkAvYXBpIjsKaW1wb3J0IFZ1ZVFyIGZyb20gInZ1ZS1xciI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAib3RoZXIiLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBwYWdlQ291bnQ6IDAsCiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICAgICAgICBwYWdlU2l6ZTogMjAsCiAgICAgICAgICAgIGRhdGFzOiBbXSwKICAgICAgICAgICAgbmV3RGF0YTogW3t9XSwKICAgICAgICAgICAgY29sbGVjdGlvbjogImNvdXJ0T3JkZXJzIiwKICAgICAgICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICAgICAgICBuZXdPcmRlcjogewogICAgICAgICAgICAgICAgbmlja05hbWU6ICIiLAogICAgICAgICAgICAgICAgcGhvbmVOdW06ICIiLAogICAgICAgICAgICAgICAgY291cnRzOiBbXSwKICAgICAgICAgICAgICAgIGRhdGU6ICIiLAogICAgICAgICAgICAgICAgcGVyaW9kczogW10sCiAgICAgICAgICAgICAgICBwcmljZTogMAogICAgICAgICAgICB9LAogICAgICAgICAgICBjb3VydHM6IFtdLAogICAgICAgICAgICBmb3JtTGFiZWxXaWR0aDogIjEyMHB4IiwKICAgICAgICAgICAgd2VlazogW10sCiAgICAgICAgICAgIHNlbGVjdGVkUGVyaW9kczogW10sCiAgICAgICAgICAgIHNlYXJjaDogIiIKICAgICAgICB9OwogICAgfSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBWdWVRcgogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgZ2V0RGF0YXNCeU9yZGVyKCJjb3VydHMiLCAibnVtYmVyIiwgImFzYyIpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgdGhpcy4kZGF0YS5jb3VydHMgPSByZXMuZGF0YTsKICAgICAgICB9KTsKICAgICAgICBnZXREYXRhc0J5T3JkZXIoIndlZWsiLCAibnVtYmVyIiwgImFzYyIpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgdGhpcy4kZGF0YS53ZWVrID0gcmVzLmRhdGE7CiAgICAgICAgfSk7CiAgICAgICAgZ2V0Q29sbGVjdGlvbkNvdW50V2l0aFBhcmFtKHRoaXMuJGRhdGEuY29sbGVjdGlvbiwgeyBpc1ZJUDogdHJ1ZSB9KQogICAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICAgIHRoaXMuJGRhdGEucGFnZUNvdW50ID0gcmVzLnRvdGFsOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgIH0pOwogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5nZXRDb2xsZWN0aW9uKHRoaXMuJGRhdGEuY3VycmVudFBhZ2UsIHRoaXMuJGRhdGEucGFnZVNpemUpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgcmVzLmZvckVhY2goZWxlbWVudCA9PiB7CiAgICAgICAgICAgICAgICBlbGVtZW50LmNyZWF0ZWRGb3JtYXQgPSB0aGlzLiRkYXRlRm9ybWF0KGVsZW1lbnQuY3JlYXRlZCwgInl5eXktbW0tZGQgSEg6TU0iKTsKICAgICAgICAgICAgICAgIGVsZW1lbnQub3JkZXJEYXRlRm9ybWF0ID0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRkYXRlRm9ybWF0KGVsZW1lbnQub3JkZXJNc2cuc3RhcnQsICJ5eXl5LW1tLWRkIEhIOk1NIikgKyAiIC0gIiArIHRoaXMuJGRhdGVGb3JtYXQoZWxlbWVudC5vcmRlck1zZy5lbmQsICJISDpNTSIpOwogICAgICAgICAgICAgICAgZWxlbWVudC5jb3VydHNGb3JtYXQgPSB0aGlzLmZvcm1hdE9yZGVyQ291cnRzKGVsZW1lbnQub3JkZXJNc2cuY291cnRzKTsKICAgICAgICAgICAgICAgIGNvbnN0IHFyQ29kZVBhcmFtID0geyBpZDogZWxlbWVudC5faWQsIHR5cGU6IDIgfTsKICAgICAgICAgICAgICAgIGVsZW1lbnQucXJDb2RlID0gSlNPTi5zdHJpbmdpZnkocXJDb2RlUGFyYW0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy4kZGF0YS5kYXRhcyA9IHJlczsKICAgICAgICB9KTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgICAgICAgdGhpcy5nZXRDb2xsZWN0aW9uKHZhbCwgdGhpcy4kZGF0YS5wYWdlU2l6ZSwgeyBpc1ZJUDogdHJ1ZSB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICByZXMuZm9yRWFjaChlbGVtZW50ID0+IHsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNyZWF0ZWRGb3JtYXQgPSB0aGlzLiRkYXRlRm9ybWF0KGVsZW1lbnQuY3JlYXRlZCwgInl5eXktbW0tZGQgSEg6TU0iKTsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lm9yZGVyRGF0ZUZvcm1hdCA9CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGRhdGVGb3JtYXQoZWxlbWVudC5vcmRlck1zZy5zdGFydCwgInl5eXktbW0tZGQgSEg6TU0iKSArCiAgICAgICAgICAgICAgICAgICAgICAgICIgLSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZGF0ZUZvcm1hdChlbGVtZW50Lm9yZGVyTXNnLmVuZCwgIkhIOk1NIik7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jb3VydHNGb3JtYXQgPSB0aGlzLmZvcm1hdE9yZGVyQ291cnRzKGVsZW1lbnQub3JkZXJNc2cuY291cnRzKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBxckNvZGVQYXJhbSA9IHsgaWQ6IGVsZW1lbnQuX2lkLCB0eXBlOiAyIH07CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5xckNvZGUgPSBKU09OLnN0cmluZ2lmeShxckNvZGVQYXJhbSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuJGRhdGEuZGF0YXMgPSByZXM7CiAgICAgICAgICAgICAgICB0aGlzLiRkYXRhLmRhdGFzID0gcmVzOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIHBpY2tlRGF0ZSh2YWx1ZSkgewogICAgICAgICAgICB0aGlzLiRkYXRhLm5ld09yZGVyLnBlcmlvZHMgPSBbXTsKICAgICAgICAgICAgY29uc3QgbnVtT2ZXZWVrID0gdGhpcy4kZGF0YS5uZXdPcmRlci5kYXRlLmdldERheSgpOwogICAgICAgICAgICBjb25zdCBwZXJpb2RzID0gdGhpcy4kZGF0YS53ZWVrLmZpbmQocGVyaW9kID0+IHBlcmlvZC5faWQgPT0gbnVtT2ZXZWVrLnRvU3RyaW5nKCkpOwogICAgICAgICAgICBjb25zb2xlLmxvZygicGVyaW9kczoiLCBwZXJpb2RzKTsKICAgICAgICAgICAgdmFyIG5ld1BlcmlvZHMgPSBbXTsKICAgICAgICAgICAgcGVyaW9kcy5wZXJpb2QuZm9yRWFjaChlbGVtZW50ID0+IHsKICAgICAgICAgICAgICAgIHZhciBzdGFydERhdGUgPSBuZXcgRGF0ZSh2YWx1ZSk7CiAgICAgICAgICAgICAgICBzdGFydERhdGUuc2V0SG91cnMoZWxlbWVudC5zdGFydEhvdXIpOwogICAgICAgICAgICAgICAgc3RhcnREYXRlLnNldE1pbnV0ZXMoZWxlbWVudC5zdGFydE1pbnV0ZSk7CiAgICAgICAgICAgICAgICBjb25zdCBzdGFydEZvcm1hdCA9IHN0YXJ0RGF0ZS5mb3JtYXQoImhoOm1tIik7CiAgICAgICAgICAgICAgICB2YXIgZW5kRGF0ZSA9IG5ldyBEYXRlKHZhbHVlKTsKICAgICAgICAgICAgICAgIGVuZERhdGUuc2V0SG91cnMoZWxlbWVudC5lbmRIb3VyKTsKICAgICAgICAgICAgICAgIGVuZERhdGUuc2V0TWludXRlcyhlbGVtZW50LmVuZE1pbnV0ZSk7CiAgICAgICAgICAgICAgICBjb25zdCBlbmRGb3JtYXQgPSBlbmREYXRlLmZvcm1hdCgiaGg6bW0iKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBQZXJpb2QgPSB7CiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0RGF0ZSwKICAgICAgICAgICAgICAgICAgICBlbmQ6IGVuZERhdGUsCiAgICAgICAgICAgICAgICAgICAgaGFsZlByaWNlOiBlbGVtZW50LmhhbGZQcmljZSwKICAgICAgICAgICAgICAgICAgICBmdWxsUHJpY2U6IGVsZW1lbnQuZnVsbFByaWNlLAogICAgICAgICAgICAgICAgICAgIG5hbWU6IHN0YXJ0Rm9ybWF0ICsgIiAtICIgKyBlbmRGb3JtYXQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBuZXdQZXJpb2RzLnB1c2godGVtcFBlcmlvZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLiRkYXRhLnNlbGVjdGVkUGVyaW9kcyA9IG5ld1BlcmlvZHM7CiAgICAgICAgfSwKICAgICAgICBjYW5jZWxDcmVhdGUoKSB7CiAgICAgICAgICAgIHRoaXMuJGRhdGEuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy4kZGF0YS5uZXdPcmRlciA9IHRoaXMuZGVmYXVsdE5ld09yZGVyKCk7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBjcmVhdGVOZXdPcmRlcigpIHsKICAgICAgICAgICAgY29uc3QgbmV3T3JkZXIgPSB0aGlzLiRkYXRhLm5ld09yZGVyOwogICAgICAgICAgICBpZiAobmV3T3JkZXIucGhvbmVOdW0ubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeaJi+acuuWPt++8gSIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAobmV3T3JkZXIucGVyaW9kcy5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi6K+36YCJ5oup5pe26Ze05q6177yBIgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLiRkYXRhLm5ld09yZGVyID0gdGhpcy5kZWZhdWx0TmV3T3JkZXIoKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobmV3T3JkZXIuY291cnRzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fpgInmi6nlnLrlnLDvvIEiCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuJGRhdGEubmV3T3JkZXIgPSB0aGlzLmRlZmF1bHROZXdPcmRlcigpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBvcmRlcnMgPSBbXTsKICAgICAgICAgICAgbmV3T3JkZXIucGVyaW9kcy5tYXAoKGVsZW1lbnQsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U2Vjb25kID0gZGF0ZS5nZXRTZWNvbmRzKCkgKyBpbmRleDsKICAgICAgICAgICAgICAgIGRhdGUuc2V0U2Vjb25kcyhjdXJyZW50U2Vjb25kKTsKICAgICAgICAgICAgICAgIGNvbnN0IG9yZGVyTXNnID0gewogICAgICAgICAgICAgICAgICAgIGNvdXJ0czogbmV3T3JkZXIuY291cnRzLAogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBlbGVtZW50LnN0YXJ0LAogICAgICAgICAgICAgICAgICAgIGVuZDogZWxlbWVudC5lbmQsCiAgICAgICAgICAgICAgICAgICAgb3V0VHJhZGVObzogIjA3NTIiICsgZGF0ZS5mb3JtYXQoInl5eXlNTWRkaGhtbXNzIiksCiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IG5ld09yZGVyLnByaWNlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgb3JkZXJzLnB1c2gob3JkZXJNc2cpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKG9yZGVycy5sZW5ndGggPT0gMCkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBwcm9taXNlcyA9IG9yZGVycy5tYXAoZWxlbWVudCA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbENsb3VkRnVuY3Rpb24oImNoZWNrUmVzb3VyY2UiLCBlbGVtZW50KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTsKICAgICAgICAgICAgdmFyIGFsbFZhbGlkID0gdHJ1ZTsKICAgICAgICAgICAgcmVzLmZvckVhY2goZWxlbWVudCA9PiB7CiAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnQucmVzdWx0LnJlc291cmNlQXZhbGlhYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgYWxsVmFsaWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmICghYWxsVmFsaWQpIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuivpeaXtuautemDqOWIhuWcuuWcsOW3suiiq+WNoOeUqCIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy4kZGF0YS5uZXdPcmRlciA9IHRoaXMuZGVmYXVsdE5ld09yZGVyKCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgbmV3T3JkZXJQcm9taXNlcyA9IG9yZGVycy5tYXAoKGVsZW1lbnQsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBlbGVtZW50LnJlc291cmNlSWRzID0gcmVzW2luZGV4XS5yZXN1bHQucmVzb3VyY2VJZHM7CiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbSA9IHsKICAgICAgICAgICAgICAgICAgICBjcmVhdGVkOiBuZXcgRGF0ZSgpLAogICAgICAgICAgICAgICAgICAgIF9pZDogZWxlbWVudC5vdXRUcmFkZU5vLAogICAgICAgICAgICAgICAgICAgIG9yZGVyTXNnOiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgIHZhbGlkQ291bnQ6IDQwICogZWxlbWVudC5jb3VydHMubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgIGlzVklQOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGhhc1JlZnVuZDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgdXNlckluZm86IHsKICAgICAgICAgICAgICAgICAgICAgICAgbmlja05hbWU6IG5ld09yZGVyLm5pY2tOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBwaG9uZU51bTogbmV3T3JkZXIucGhvbmVOdW0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIGFkZEluZm8ocGFyYW0sICJjb3VydE9yZGVycyIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3QgbmV3T3JkZXJSZXMgPSBhd2FpdCBQcm9taXNlLmFsbChuZXdPcmRlclByb21pc2VzKTsKCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgbWVzc2FnZTogIuiuouWNleaWsOW7uuaIkOWKn++8jOWNs+WwhuWIt+aWsOmhtemdoiIKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuJGRhdGEubmV3T3JkZXIgPSB0aGlzLmRlZmF1bHROZXdPcmRlcigpOwogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygwKTsKICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9LAoKICAgICAgICBkZWZhdWx0TmV3T3JkZXIoKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBwaG9uZU51bTogIiIsCiAgICAgICAgICAgICAgICBjb3VydHM6IFtdLAogICAgICAgICAgICAgICAgZGF0ZTogIiIsCiAgICAgICAgICAgICAgICBwZXJpb2RzOiBbXSwKICAgICAgICAgICAgICAgIHByaWNlOiAwCiAgICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICBnZXRDb2xsZWN0aW9uKGN1cnJlbnRQYWdlLCBwYWdlU2l6ZSwgcGFyYW0pIHsKICAgICAgICAgICAgaWYgKCFwYXJhbSkgewogICAgICAgICAgICAgICAgcGFyYW0gPSB7CiAgICAgICAgICAgICAgICAgICAgaXNWSVA6IHRydWUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IChjdXJyZW50UGFnZSAtIDEpICogcGFnZVNpemU7CiAgICAgICAgICAgICAgICBnZXRDb2xsZWN0aW9uc0J5UGFnZVdpdGhQYXJhbUFuZE9yZGVyKHRoaXMuJGRhdGEuY29sbGVjdGlvbiwgb2Zmc2V0LCBwYWdlU2l6ZSwgcGFyYW0sICJjcmVhdGVkIiwgImRlc2MiKQogICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGZvcm1hdE9yZGVyQ291cnRzKGNvdXJ0cykgewogICAgICAgICAgICBsZXQgY291cnRzU3RyID0gIiI7CiAgICAgICAgICAgIGNvdXJ0cy5mb3JFYWNoKGNvdXJ0ID0+IHsKICAgICAgICAgICAgICAgIGNvdXJ0c1N0ciArPSBjb3VydC5uYW1lICsgIu+8jCI7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb3VydHNTdHIgPSBjb3VydHNTdHIuc3Vic3RyKDAsIGNvdXJ0c1N0ci5sZW5ndGggLSAxKTsKICAgICAgICAgICAgcmV0dXJuIGNvdXJ0c1N0cjsKICAgICAgICB9LAogICAgICAgIGhhbmRsZURlbGV0ZShpbmZvKSB7CiAgICAgICAgICAgIHRoaXMuJHByb21wdCgi6K+36L6T5YWl5a+G56CBIiwgIuaPkOekuiIsIHsKICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgICAgICAgICAgaW5wdXRUeXBlOiAibmV3LXBhc3N3b3JkIgogICAgICAgICAgICB9KS50aGVuKCh7IHZhbHVlIH0pID0+IHsKICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gIjk0NzExNyIpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuWvhueggemUmeivryIKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKCLliKDpmaTlvZPliY3orqLljZXkv6Hmga/liY3or7fnoa7orqTmmK/lkKblrozmiJDpgIDmrL7mk43kvZwiLCAi5o+Q56S6IiwgewogICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb21pc2VzID0gaW5mby5vcmRlck1zZy5yZXNvdXJjZUlkcy5tYXAoaWQgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNvdXJjZSA9IHsgX2lkOiBpZCB9OwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVsZXRlSW5mbyhyZXNvdXJjZSwgInJlc291cmNlIik7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVJbmZvKGluZm8sIHRoaXMuJGRhdGEuY29sbGVjdGlvbikudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLlt7LliKDpmaTvvIzljbPlsIbliLfmlrDpobXpnaLvvIEiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIHNlYXJjaENsaWNrKCkgewogICAgICAgICAgICBnZXRDb2xsZWN0aW9uQ291bnRXaXRoUGFyYW0odGhpcy4kZGF0YS5jb2xsZWN0aW9uLCB7CiAgICAgICAgICAgICAgICBpc1ZJUDogdHJ1ZSwKICAgICAgICAgICAgICAgICJ1c2VySW5mby5waG9uZU51bSI6IHRoaXMuJGRhdGEuc2VhcmNoCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuJGRhdGEucGFnZUNvdW50ID0gcmVzLnRvdGFsOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q29sbGVjdGlvbih0aGlzLiRkYXRhLmN1cnJlbnRQYWdlLCB0aGlzLiRkYXRhLnBhZ2VTaXplLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzVklQOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAidXNlckluZm8ucGhvbmVOdW0iOiB0aGlzLiRkYXRhLnNlYXJjaAogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmZvckVhY2goZWxlbWVudCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNyZWF0ZWRGb3JtYXQgPSB0aGlzLiRkYXRlRm9ybWF0KGVsZW1lbnQuY3JlYXRlZCwgInl5eXktbW0tZGQgSEg6TU0iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQub3JkZXJEYXRlRm9ybWF0ID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRkYXRlRm9ybWF0KGVsZW1lbnQub3JkZXJNc2cuc3RhcnQsICJ5eXl5LW1tLWRkIEhIOk1NIikgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgLSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRkYXRlRm9ybWF0KGVsZW1lbnQub3JkZXJNc2cuZW5kLCAiSEg6TU0iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY291cnRzRm9ybWF0ID0gdGhpcy5mb3JtYXRPcmRlckNvdXJ0cyhlbGVtZW50Lm9yZGVyTXNnLmNvdXJ0cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBxckNvZGVQYXJhbSA9IHsgaWQ6IGVsZW1lbnQuX2lkLCB0eXBlOiAyIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnFyQ29kZSA9IEpTT04uc3RyaW5naWZ5KHFyQ29kZVBhcmFtKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGRhdGEuZGF0YXMgPSByZXM7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgY2xlYXJDbGljaygpIHsKICAgICAgICAgICAgdGhpcy5nZXRDb2xsZWN0aW9uKHRoaXMuJGRhdGEuY3VycmVudFBhZ2UsIHRoaXMuJGRhdGEucGFnZVNpemUpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgICAgICByZXMuc29ydCgoYSwgYikgPT4gYi5jcmVhdGVkIC0gYS5jcmVhdGVkKTsKICAgICAgICAgICAgICAgIHJlcy5mb3JFYWNoKGVsZW1lbnQgPT4gewogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY3JlYXRlZEZvcm1hdCA9IHRoaXMuJGRhdGVGb3JtYXQoZWxlbWVudC5jcmVhdGVkLCAieXl5eS1tbS1kZCBISDpNTSIpOwogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQub3JkZXJEYXRlRm9ybWF0ID0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZGF0ZUZvcm1hdChlbGVtZW50Lm9yZGVyTXNnLnN0YXJ0LCAieXl5eS1tbS1kZCBISDpNTSIpICsKICAgICAgICAgICAgICAgICAgICAgICAgIiAtICIgKwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRkYXRlRm9ybWF0KGVsZW1lbnQub3JkZXJNc2cuZW5kLCAiSEg6TU0iKTsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNvdXJ0c0Zvcm1hdCA9IHRoaXMuZm9ybWF0T3JkZXJDb3VydHMoZWxlbWVudC5vcmRlck1zZy5jb3VydHMpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHFyQ29kZVBhcmFtID0geyBpZDogZWxlbWVudC5faWQsIHR5cGU6IDIgfTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShxckNvZGVQYXJhbSkpOwogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucXJDb2RlID0gSlNPTi5zdHJpbmdpZnkocXJDb2RlUGFyYW0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLiRkYXRhLmRhdGFzID0gcmVzOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9Cn07CkRhdGUucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uKGZtdCkgewogICAgdmFyIG8gPSB7CiAgICAgICAgIk0rIjogdGhpcy5nZXRNb250aCgpICsgMSwgLy/mnIjku70KICAgICAgICAiZCsiOiB0aGlzLmdldERhdGUoKSwgLy/ml6UKICAgICAgICAiaCsiOiB0aGlzLmdldEhvdXJzKCksIC8v5bCP5pe2CiAgICAgICAgIm0rIjogdGhpcy5nZXRNaW51dGVzKCksIC8v5YiGCiAgICAgICAgInMrIjogdGhpcy5nZXRTZWNvbmRzKCksIC8v56eSCiAgICAgICAgInErIjogTWF0aC5mbG9vcigodGhpcy5nZXRNb250aCgpICsgMykgLyAzKSwgLy/lraPluqYKICAgICAgICBTOiB0aGlzLmdldE1pbGxpc2Vjb25kcygpIC8v5q+r56eSCiAgICB9OwogICAgaWYgKC8oeSspLy50ZXN0KGZtdCkpIHsKICAgICAgICBmbXQgPSBmbXQucmVwbGFjZShSZWdFeHAuJDEsICh0aGlzLmdldEZ1bGxZZWFyKCkgKyAiIikuc3Vic3RyKDQgLSBSZWdFeHAuJDEubGVuZ3RoKSk7CiAgICB9CiAgICBmb3IgKHZhciBrIGluIG8pIHsKICAgICAgICBpZiAobmV3IFJlZ0V4cCgiKCIgKyBrICsgIikiKS50ZXN0KGZtdCkpIHsKICAgICAgICAgICAgZm10ID0gZm10LnJlcGxhY2UoUmVnRXhwLiQxLCBSZWdFeHAuJDEubGVuZ3RoID09IDEgPyBvW2tdIDogKCIwMCIgKyBvW2tdKS5zdWJzdHIoKCIiICsgb1trXSkubGVuZ3RoKSk7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIGZtdDsKfTsK"},{"version":3,"sources":["vipCourt.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"vipCourt.vue","sourceRoot":"src/views/vip","sourcesContent":["<template>\n    <div class=\"home-container\">\n        <div class=\"home-content\">\n            <el-input placeholder=\"请输入手机号进行搜索\" v-model=\"search\" style=\"width: 300px\" clearable @clear=\"clearClick\">\n                <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"searchClick\"></el-button>\n            </el-input>\n            <el-button style=\"margin-left: 100px\" @click=\"dialogFormVisible = true\" type=\"primary\">新建订单</el-button>\n\n            <el-dialog title=\"订单信息\" :visible.sync=\"dialogFormVisible\">\n                <el-form :model=\"newOrder\">\n                    <el-form-item label=\"用户昵称\" :label-width=\"formLabelWidth\">\n                        <el-input v-model=\"newOrder.nickName\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"手机号码\" :label-width=\"formLabelWidth\">\n                        <el-input v-model=\"newOrder.phoneNum\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"选择场地\" :label-width=\"formLabelWidth\">\n                        <el-checkbox-group v-model=\"newOrder.courts\">\n                            <el-checkbox v-for=\"court in courts\" :key=\"court._id\" :label=\"court\" :name=\"court.name\">{{\n                                court.name\n                            }}</el-checkbox>\n                        </el-checkbox-group>\n                    </el-form-item>\n                    <el-form-item label=\"选择日期\" :label-width=\"formLabelWidth\">\n                        <el-date-picker v-model=\"newOrder.date\" type=\"date\" placeholder=\"选择日期\" @change=\"pickeDate\"> </el-date-picker>\n                    </el-form-item>\n                    <el-form-item label=\"选择时间段\" :label-width=\"formLabelWidth\">\n                        <el-checkbox-group v-model=\"newOrder.periods\">\n                            <el-checkbox v-for=\"period in selectedPeriods\" :key=\"period.name\" :label=\"period\" :name=\"period.name\">{{\n                                period.name\n                            }}</el-checkbox>\n                        </el-checkbox-group>\n                    </el-form-item>\n                </el-form>\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancelCreate\">取 消</el-button>\n                    <el-button type=\"primary\" @click=\"createNewOrder\">确 定</el-button>\n                </div>\n            </el-dialog>\n            <el-table :data=\"datas\" height=\"550\" fit border style=\"\">\n                <el-table-column prop=\"createdFormat\" label=\"下单时间\" width=\"150\"> </el-table-column>\n                <el-table-column prop=\"orderDateFormat\" label=\"场地时间\" width=\"200\"> </el-table-column>\n                <el-table-column prop=\"courtsFormat\" label=\"场地\" width=\"150\"> </el-table-column>\n                <el-table-column prop=\"userInfo.nickName\" label=\"用户昵称\" width=\"120\"> </el-table-column>\n                <el-table-column prop=\"userInfo.phoneNum\" label=\"用户联系方式\" width=\"120\"> </el-table-column>\n                <el-table-column label=\"二维码\" width=\"120\">\n                    <template slot-scope=\"scope\">\n                        <vue-qr\n                            :correctLevel=\"3\"\n                            :autoColor=\"false\"\n                            colorDark=\"#313a90\"\n                            :text=\"scope.row.qrCode\"\n                            :size=\"95\"\n                            :margin=\"0\"\n                            :logoMargin=\"3\"\n                        ></vue-qr>\n                    </template>\n                </el-table-column>\n                <el-table-column label=\"操作\" width=\"150\">\n                    <template slot-scope=\"scope\">\n                        <el-button @click=\"handleDelete(scope.row)\" size=\"mini\" type=\"danger\">删除</el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n        </div>\n        <div class=\"block\">\n            <el-pagination layout=\"prev, pager, next\" :total=\"pageCount\" :page-size=\"pageSize\" @current-change=\"handleCurrentChange\">\n            </el-pagination>\n        </div>\n    </div>\n</template>\n\n<script>\nimport {\n    getCollectionCountWithParam,\n    getCollectionsByPageWithParamAndOrder,\n    deleteInfo,\n    getDatasByOrder,\n    addInfo,\n    callCloudFunction\n} from \"@/api\";\nimport VueQr from \"vue-qr\";\n\nexport default {\n    name: \"other\",\n    data() {\n        return {\n            pageCount: 0,\n            currentPage: 1,\n            pageSize: 20,\n            datas: [],\n            newData: [{}],\n            collection: \"courtOrders\",\n            dialogFormVisible: false,\n            newOrder: {\n                nickName: \"\",\n                phoneNum: \"\",\n                courts: [],\n                date: \"\",\n                periods: [],\n                price: 0\n            },\n            courts: [],\n            formLabelWidth: \"120px\",\n            week: [],\n            selectedPeriods: [],\n            search: \"\"\n        };\n    },\n    components: {\n        VueQr\n    },\n    created() {\n        getDatasByOrder(\"courts\", \"number\", \"asc\").then(res => {\n            this.$data.courts = res.data;\n        });\n        getDatasByOrder(\"week\", \"number\", \"asc\").then(res => {\n            this.$data.week = res.data;\n        });\n        getCollectionCountWithParam(this.$data.collection, { isVIP: true })\n            .then(res => {\n                console.log(res);\n                this.$data.pageCount = res.total;\n            })\n            .catch(err => {\n                console.log(err);\n            });\n    },\n    mounted() {\n        this.getCollection(this.$data.currentPage, this.$data.pageSize).then(res => {\n            res.forEach(element => {\n                element.createdFormat = this.$dateFormat(element.created, \"yyyy-mm-dd HH:MM\");\n                element.orderDateFormat =\n                    this.$dateFormat(element.orderMsg.start, \"yyyy-mm-dd HH:MM\") + \" - \" + this.$dateFormat(element.orderMsg.end, \"HH:MM\");\n                element.courtsFormat = this.formatOrderCourts(element.orderMsg.courts);\n                const qrCodeParam = { id: element._id, type: 2 };\n                element.qrCode = JSON.stringify(qrCodeParam);\n            });\n            this.$data.datas = res;\n        });\n    },\n    methods: {\n        handleCurrentChange(val) {\n            this.getCollection(val, this.$data.pageSize, { isVIP: true }).then(res => {\n                res.forEach(element => {\n                    element.createdFormat = this.$dateFormat(element.created, \"yyyy-mm-dd HH:MM\");\n                    element.orderDateFormat =\n                        this.$dateFormat(element.orderMsg.start, \"yyyy-mm-dd HH:MM\") +\n                        \" - \" +\n                        this.$dateFormat(element.orderMsg.end, \"HH:MM\");\n                    element.courtsFormat = this.formatOrderCourts(element.orderMsg.courts);\n                    const qrCodeParam = { id: element._id, type: 2 };\n                    element.qrCode = JSON.stringify(qrCodeParam);\n                });\n                this.$data.datas = res;\n                this.$data.datas = res;\n            });\n        },\n        pickeDate(value) {\n            this.$data.newOrder.periods = [];\n            const numOfWeek = this.$data.newOrder.date.getDay();\n            const periods = this.$data.week.find(period => period._id == numOfWeek.toString());\n            console.log(\"periods:\", periods);\n            var newPeriods = [];\n            periods.period.forEach(element => {\n                var startDate = new Date(value);\n                startDate.setHours(element.startHour);\n                startDate.setMinutes(element.startMinute);\n                const startFormat = startDate.format(\"hh:mm\");\n                var endDate = new Date(value);\n                endDate.setHours(element.endHour);\n                endDate.setMinutes(element.endMinute);\n                const endFormat = endDate.format(\"hh:mm\");\n                const tempPeriod = {\n                    start: startDate,\n                    end: endDate,\n                    halfPrice: element.halfPrice,\n                    fullPrice: element.fullPrice,\n                    name: startFormat + \" - \" + endFormat\n                };\n                newPeriods.push(tempPeriod);\n            });\n            this.$data.selectedPeriods = newPeriods;\n        },\n        cancelCreate() {\n            this.$data.dialogFormVisible = false;\n            this.$data.newOrder = this.defaultNewOrder();\n        },\n        async createNewOrder() {\n            const newOrder = this.$data.newOrder;\n            if (newOrder.phoneNum.length == 0) {\n                this.$message({\n                    type: \"error\",\n                    message: \"请输入手机号！\"\n                });\n                return;\n            }\n\n            if (newOrder.periods.length == 0) {\n                this.$message({\n                    type: \"error\",\n                    message: \"请选择时间段！\"\n                });\n                this.$data.newOrder = this.defaultNewOrder();\n                return;\n            }\n            if (newOrder.courts.length == 0) {\n                this.$message({\n                    type: \"error\",\n                    message: \"请选择场地！\"\n                });\n                this.$data.newOrder = this.defaultNewOrder();\n                return;\n            }\n            var orders = [];\n            newOrder.periods.map((element, index) => {\n                var date = new Date();\n                const currentSecond = date.getSeconds() + index;\n                date.setSeconds(currentSecond);\n                const orderMsg = {\n                    courts: newOrder.courts,\n                    start: element.start,\n                    end: element.end,\n                    outTradeNo: \"0752\" + date.format(\"yyyyMMddhhmmss\"),\n                    price: newOrder.price\n                };\n                orders.push(orderMsg);\n            });\n            if (orders.length == 0) return;\n            const promises = orders.map(element => {\n                return callCloudFunction(\"checkResource\", element);\n            });\n            const res = await Promise.all(promises);\n            var allValid = true;\n            res.forEach(element => {\n                if (!element.result.resourceAvaliable) {\n                    allValid = false;\n                }\n            });\n            if (!allValid) {\n                this.$message({\n                    type: \"error\",\n                    message: \"该时段部分场地已被占用\"\n                });\n                this.$data.newOrder = this.defaultNewOrder();\n                return;\n            }\n            const newOrderPromises = orders.map((element, index) => {\n                element.resourceIds = res[index].result.resourceIds;\n                const param = {\n                    created: new Date(),\n                    _id: element.outTradeNo,\n                    orderMsg: element,\n                    validCount: 40 * element.courts.length,\n                    isVIP: true,\n                    hasRefund: false,\n                    userInfo: {\n                        nickName: newOrder.nickName,\n                        phoneNum: newOrder.phoneNum\n                    }\n                };\n                return addInfo(param, \"courtOrders\");\n            });\n            const newOrderRes = await Promise.all(newOrderPromises);\n\n            this.$message({\n                type: \"success\",\n                message: \"订单新建成功，即将刷新页面\"\n            });\n            this.$data.newOrder = this.defaultNewOrder();\n            setTimeout(() => {\n                this.$router.go(0);\n            }, 1000);\n            return;\n        },\n\n        defaultNewOrder() {\n            return {\n                phoneNum: \"\",\n                courts: [],\n                date: \"\",\n                periods: [],\n                price: 0\n            };\n        },\n        getCollection(currentPage, pageSize, param) {\n            if (!param) {\n                param = {\n                    isVIP: true\n                };\n            }\n            return new Promise((resolve, reject) => {\n                const offset = (currentPage - 1) * pageSize;\n                getCollectionsByPageWithParamAndOrder(this.$data.collection, offset, pageSize, param, \"created\", \"desc\")\n                    .then(res => {\n                        resolve(res.data);\n                    })\n                    .catch(err => {\n                        reject(err);\n                    });\n            });\n        },\n        formatOrderCourts(courts) {\n            let courtsStr = \"\";\n            courts.forEach(court => {\n                courtsStr += court.name + \"，\";\n            });\n            courtsStr = courtsStr.substr(0, courtsStr.length - 1);\n            return courtsStr;\n        },\n        handleDelete(info) {\n            this.$prompt(\"请输入密码\", \"提示\", {\n                confirmButtonText: \"确定\",\n                cancelButtonText: \"取消\",\n                inputType: \"new-password\"\n            }).then(({ value }) => {\n                if (value !== \"947117\") {\n                    this.$message({\n                        type: \"error\",\n                        message: \"密码错误\"\n                    });\n                    return;\n                }\n                this.$confirm(\"删除当前订单信息前请确认是否完成退款操作\", \"提示\", {\n                    confirmButtonText: \"确定\",\n                    cancelButtonText: \"取消\",\n                    type: \"warning\"\n                }).then(() => {\n                    const promises = info.orderMsg.resourceIds.map(id => {\n                        const resource = { _id: id };\n                        return deleteInfo(resource, \"resource\");\n                    });\n                    Promise.all(promises).then(() => {\n                        deleteInfo(info, this.$data.collection).then(res => {\n                            this.$message({\n                                type: \"success\",\n                                message: \"已删除，即将刷新页面！\"\n                            });\n                            setTimeout(() => {\n                                this.$router.go(0);\n                            }, 1000);\n                        });\n                    });\n                });\n            });\n        },\n        searchClick() {\n            getCollectionCountWithParam(this.$data.collection, {\n                isVIP: true,\n                \"userInfo.phoneNum\": this.$data.search\n            })\n                .then(res => {\n                    this.$data.pageCount = res.total;\n                    this.getCollection(this.$data.currentPage, this.$data.pageSize, {\n                        isVIP: true,\n                        \"userInfo.phoneNum\": this.$data.search\n                    }).then(res => {\n                        res.forEach(element => {\n                            element.createdFormat = this.$dateFormat(element.created, \"yyyy-mm-dd HH:MM\");\n                            element.orderDateFormat =\n                                this.$dateFormat(element.orderMsg.start, \"yyyy-mm-dd HH:MM\") +\n                                \" - \" +\n                                this.$dateFormat(element.orderMsg.end, \"HH:MM\");\n                            element.courtsFormat = this.formatOrderCourts(element.orderMsg.courts);\n                            const qrCodeParam = { id: element._id, type: 2 };\n                            element.qrCode = JSON.stringify(qrCodeParam);\n                        });\n                        this.$data.datas = res;\n                    });\n                })\n                .catch(err => {\n                    console.log(err);\n                });\n        },\n        clearClick() {\n            this.getCollection(this.$data.currentPage, this.$data.pageSize).then(res => {\n                console.log(res);\n                res.sort((a, b) => b.created - a.created);\n                res.forEach(element => {\n                    element.createdFormat = this.$dateFormat(element.created, \"yyyy-mm-dd HH:MM\");\n                    element.orderDateFormat =\n                        this.$dateFormat(element.orderMsg.start, \"yyyy-mm-dd HH:MM\") +\n                        \" - \" +\n                        this.$dateFormat(element.orderMsg.end, \"HH:MM\");\n                    element.courtsFormat = this.formatOrderCourts(element.orderMsg.courts);\n                    const qrCodeParam = { id: element._id, type: 2 };\n                    console.log(JSON.stringify(qrCodeParam));\n                    element.qrCode = JSON.stringify(qrCodeParam);\n                });\n                this.$data.datas = res;\n            });\n        }\n    }\n};\nDate.prototype.format = function(fmt) {\n    var o = {\n        \"M+\": this.getMonth() + 1, //月份\n        \"d+\": this.getDate(), //日\n        \"h+\": this.getHours(), //小时\n        \"m+\": this.getMinutes(), //分\n        \"s+\": this.getSeconds(), //秒\n        \"q+\": Math.floor((this.getMonth() + 3) / 3), //季度\n        S: this.getMilliseconds() //毫秒\n    };\n    if (/(y+)/.test(fmt)) {\n        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n    }\n    for (var k in o) {\n        if (new RegExp(\"(\" + k + \")\").test(fmt)) {\n            fmt = fmt.replace(RegExp.$1, RegExp.$1.length == 1 ? o[k] : (\"00\" + o[k]).substr((\"\" + o[k]).length));\n        }\n    }\n    return fmt;\n};\n</script>\n\n<style></style>\n"]}]}