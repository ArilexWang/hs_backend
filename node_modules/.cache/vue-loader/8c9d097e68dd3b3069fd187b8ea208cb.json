{"remainingRequest":"/Users/alex/Documents/HS/basketballbackend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alex/Documents/HS/basketballbackend/src/views/Week.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alex/Documents/HS/basketballbackend/src/views/Week.vue","mtime":1662167923919},{"path":"/Users/alex/Documents/HS/basketballbackend/node_modules/cache-loader/dist/cjs.js","mtime":1662170097529},{"path":"/Users/alex/Documents/HS/basketballbackend/node_modules/babel-loader/lib/index.js","mtime":1662170097912},{"path":"/Users/alex/Documents/HS/basketballbackend/node_modules/cache-loader/dist/cjs.js","mtime":1662170097529},{"path":"/Users/alex/Documents/HS/basketballbackend/node_modules/vue-loader/lib/index.js","mtime":1662170098083}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlIHF1b3RlcyAqLwovKiBlc2xpbnQtZGlzYWJsZSBpbmRlbnQgKi8KLyogZXNsaW50LWRpc2FibGUgc2VtaSAqLwovKiBlc2xpbnQtZGlzYWJsZSByYWRpeCAqLwovKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlcnNjb3JlLWRhbmdsZSAqLwppbXBvcnQgeyBnZXREYXRhV2l0aElkLCB1cGRhdGVJbmZvIH0gZnJvbSAiQC9hcGkiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJ3ZWVrIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0YToge30sCiAgICAgIGRhdGFzOiBbXSwKICAgICAgbmV3RGF0YTogW3t9XSwKICAgICAgY29sbGVjdGlvbjogIndlZWsiLAogICAgICBzZWxlY3RPcHRpb25zOiBbCiAgICAgICAgeyB2YWx1ZTogIjAiLCBsYWJlbDogIuaYn+acn+aXpSIgfSwKICAgICAgICB7IHZhbHVlOiAiMSIsIGxhYmVsOiAi5pif5pyf5LiAIiB9LAogICAgICAgIHsgdmFsdWU6ICIyIiwgbGFiZWw6ICLmmJ/mnJ/kuowiIH0sCiAgICAgICAgeyB2YWx1ZTogIjMiLCBsYWJlbDogIuaYn+acn+S4iSIgfSwKICAgICAgICB7IHZhbHVlOiAiNCIsIGxhYmVsOiAi5pif5pyf5ZubIiB9LAogICAgICAgIHsgdmFsdWU6ICI1IiwgbGFiZWw6ICLmmJ/mnJ/kupQiIH0sCiAgICAgICAgeyB2YWx1ZTogIjYiLCBsYWJlbDogIuaYn+acn+WFrSIgfSwKICAgICAgXSwKICAgICAgc2VsZWN0ZWRWYWx1ZTogIjAiLAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBnZXREYXRhV2l0aElkKHRoaXMuJGRhdGEuY29sbGVjdGlvbiwgdGhpcy4kZGF0YS5zZWxlY3RlZFZhbHVlKS50aGVuKAogICAgICAocmVzKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICB0aGlzLiRkYXRhLmRhdGEgPSByZXMuZGF0YVswXTsKICAgICAgfQogICAgKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVVwZGF0ZSgpIHsKICAgICAgdGhpcy4kY29uZmlybSgi5piv5ZCm5o+Q5Lqk5L+u5pS5IiwgIuaPkOekuiIsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuJGRhdGEuZGF0YS5wZXJpb2QuZm9yRWFjaCgoZWxlbWVudCkgPT4gewogICAgICAgICAgICBlbGVtZW50LnN0YXJ0SG91ciA9IHBhcnNlSW50KGVsZW1lbnQuc3RhcnRIb3VyKTsKICAgICAgICAgICAgZWxlbWVudC5lbmRIb3VyID0gcGFyc2VJbnQoZWxlbWVudC5lbmRIb3VyKTsKICAgICAgICAgICAgZWxlbWVudC5oYWxmUHJpY2UgPSBwYXJzZUludChlbGVtZW50LmhhbGZQcmljZSk7CiAgICAgICAgICAgIGVsZW1lbnQuZnVsbFByaWNlID0gcGFyc2VJbnQoZWxlbWVudC5mdWxsUHJpY2UpOwogICAgICAgICAgICBlbGVtZW50LnN0YXJ0TWludXRlID0gcGFyc2VJbnQoZWxlbWVudC5zdGFydE1pbnV0ZSk7CiAgICAgICAgICAgIGVsZW1lbnQuZW5kTWludXRlID0gcGFyc2VJbnQoZWxlbWVudC5lbmRNaW51dGUpOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLiRkYXRhLmRhdGEucGVyaW9kLnNvcnQoKGEsIGIpID0+IGEuc3RhcnRIb3VyIC0gYi5zdGFydEhvdXIpOwogICAgICAgICAgdXBkYXRlSW5mbyh0aGlzLiRkYXRhLmRhdGEsIHRoaXMuJGRhdGEuY29sbGVjdGlvbikudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIGlmIChyZXMudXBkYXRlZCA9PSAxKSB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5bey5L+d5a2YISIsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLmdvKDApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5nbygwKTsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHR5cGU6ICJmYWlsIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLkv53lrZjlpLHotKUhIiwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygwKTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAiaW5mbyIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLkv53lrZjlpLHotKUiLAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRGVsZXRlKGluZGV4KSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oIuaYr+WQpuWIoOmZpOW9k+WJjeaXtumXtOautSIsICLmj5DnpLoiLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coaW5kZXgpOwogICAgICAgIHRoaXMuJGRhdGEuZGF0YS5wZXJpb2Quc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLiRkYXRhLmRhdGEpOwogICAgICAgIC8vIGRlbGV0ZUluZm8oaW5mbywgdGhpcy4kZGF0YS5jb2xsZWN0aW9uKS50aGVuKCgpID0+IHsKICAgICAgICAvLyAgIHRoaXMuJHJvdXRlci5nbygwKTsKICAgICAgICAvLyB9KTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQWRkKCkgewogICAgICB0aGlzLiRkYXRhLmRhdGEucGVyaW9kLnB1c2goe30pOwogICAgfSwKICAgIHNlbGVjdENoYW5nZWQodmFsdWUpIHsKICAgICAgY29uc29sZS5sb2codmFsdWUsIHRoaXMuJGRhdGEuc2VsZWN0T3B0aW9uc1t2YWx1ZV0pOwogICAgICBnZXREYXRhV2l0aElkKHRoaXMuJGRhdGEuY29sbGVjdGlvbiwgdGhpcy4kZGF0YS5zZWxlY3RlZFZhbHVlKS50aGVuKAogICAgICAgIChyZXMpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICB0aGlzLiRkYXRhLmRhdGEgPSByZXMuZGF0YVswXTsKICAgICAgICB9CiAgICAgICk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Week.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Week.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"home-container\">\n    <div class=\"home-content\">\n      <el-row type=\"flex\" align=\"middle\">\n        <el-col :span=\"8\">\n          <el-select\n            v-model=\"selectedValue\"\n            placeholder=\"请选择\"\n            @change=\"selectChanged\"\n          >\n            <el-option\n              v-for=\"item in selectOptions\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            >\n            </el-option>\n          </el-select>\n        </el-col>\n        <el-col :span=\"8\">\n          <el-button size=\"mini\" @click=\"handleAdd\">新增时间段</el-button>\n        </el-col>\n        <el-col :span=\"8\">\n          <el-button size=\"mini\" @click=\"handleUpdate\">保存</el-button>\n        </el-col>\n      </el-row>\n      <el-table\n        :data=\"data.period\"\n        :default-sort=\"{ prop: 'startHour' }\"\n        height=\"450\"\n        border\n        style=\"margin-top: 10px\"\n      >\n        <el-table-column prop=\"name\" label=\"开始时\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-input type=\"number\" v-model=\"scope.row.startHour\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"price\" label=\"开始分\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-input type=\"number\" v-model=\"scope.row.startMinute\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"value\" label=\"结束时\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-input type=\"number\" v-model=\"scope.row.endHour\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"type\" label=\"结束分\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-input type=\"number\" v-model=\"scope.row.endMinute\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"type\" label=\"半场价格\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-input type=\"number\" v-model=\"scope.row.halfPrice\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"type\" label=\"全场价格\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-input type=\"number\" v-model=\"scope.row.fullPrice\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"150\">\n          <template slot-scope=\"scope\">\n            <el-button\n              @click=\"handleDelete(scope.$index)\"\n              size=\"mini\"\n              type=\"danger\"\n              >删除</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable quotes */\n/* eslint-disable indent */\n/* eslint-disable semi */\n/* eslint-disable radix */\n/* eslint-disable no-underscore-dangle */\nimport { getDataWithId, updateInfo } from \"@/api\";\n\nexport default {\n  name: \"week\",\n  data() {\n    return {\n      data: {},\n      datas: [],\n      newData: [{}],\n      collection: \"week\",\n      selectOptions: [\n        { value: \"0\", label: \"星期日\" },\n        { value: \"1\", label: \"星期一\" },\n        { value: \"2\", label: \"星期二\" },\n        { value: \"3\", label: \"星期三\" },\n        { value: \"4\", label: \"星期四\" },\n        { value: \"5\", label: \"星期五\" },\n        { value: \"6\", label: \"星期六\" },\n      ],\n      selectedValue: \"0\",\n    };\n  },\n  created() {\n    getDataWithId(this.$data.collection, this.$data.selectedValue).then(\n      (res) => {\n        console.log(res);\n        this.$data.data = res.data[0];\n      }\n    );\n  },\n  methods: {\n    handleUpdate() {\n      this.$confirm(\"是否提交修改\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          this.$data.data.period.forEach((element) => {\n            element.startHour = parseInt(element.startHour);\n            element.endHour = parseInt(element.endHour);\n            element.halfPrice = parseInt(element.halfPrice);\n            element.fullPrice = parseInt(element.fullPrice);\n            element.startMinute = parseInt(element.startMinute);\n            element.endMinute = parseInt(element.endMinute);\n          });\n          this.$data.data.period.sort((a, b) => a.startHour - b.startHour);\n          updateInfo(this.$data.data, this.$data.collection).then((res) => {\n            if (res.updated == 1) {\n              this.$message({\n                type: \"success\",\n                message: \"已保存!\",\n              });\n              // this.$router.go(0);\n            } else {\n              // this.$router.go(0);\n              this.$message({\n                type: \"fail\",\n                message: \"保存失败!\",\n              });\n            }\n          });\n        })\n        .catch((err) => {\n          console.log(err);\n          this.$router.go(0);\n          this.$message({\n            type: \"info\",\n            message: \"保存失败\",\n          });\n        });\n    },\n    handleDelete(index) {\n      this.$confirm(\"是否删除当前时间段\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      }).then(() => {\n        console.log(index);\n        this.$data.data.period.splice(index, 1);\n        console.log(this.$data.data);\n        // deleteInfo(info, this.$data.collection).then(() => {\n        //   this.$router.go(0);\n        // });\n      });\n    },\n    handleAdd() {\n      this.$data.data.period.push({});\n    },\n    selectChanged(value) {\n      console.log(value, this.$data.selectOptions[value]);\n      getDataWithId(this.$data.collection, this.$data.selectedValue).then(\n        (res) => {\n          console.log(res);\n          this.$data.data = res.data[0];\n        }\n      );\n    },\n  },\n};\n</script>\n\n<style scoped>\n.home-container {\n  padding: 10px;\n  padding-top: 5px;\n}\n.home-content {\n  padding: 10px;\n  border-radius: 5px;\n  background: #fff;\n}\n</style>"]}]}