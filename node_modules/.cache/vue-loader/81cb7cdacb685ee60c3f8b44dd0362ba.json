{"remainingRequest":"/Users/alex/Documents/HS/basketballbackend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alex/Documents/HS/basketballbackend/src/views/Week.vue?vue&type=style&index=0&id=7a6e392e&scoped=true&lang=css&","dependencies":[{"path":"/Users/alex/Documents/HS/basketballbackend/src/views/Week.vue","mtime":1662167923919},{"path":"/Users/alex/Documents/HS/basketballbackend/node_modules/css-loader/dist/cjs.js","mtime":1662170097783},{"path":"/Users/alex/Documents/HS/basketballbackend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1662170098278},{"path":"/Users/alex/Documents/HS/basketballbackend/node_modules/postcss-loader/src/index.js","mtime":1662170097902},{"path":"/Users/alex/Documents/HS/basketballbackend/node_modules/cache-loader/dist/cjs.js","mtime":1662170097529},{"path":"/Users/alex/Documents/HS/basketballbackend/node_modules/vue-loader/lib/index.js","mtime":1662170098083}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5ob21lLWNvbnRhaW5lciB7CiAgcGFkZGluZzogMTBweDsKICBwYWRkaW5nLXRvcDogNXB4Owp9Ci5ob21lLWNvbnRlbnQgewogIHBhZGRpbmc6IDEwcHg7CiAgYm9yZGVyLXJhZGl1czogNXB4OwogIGJhY2tncm91bmQ6ICNmZmY7Cn0K"},{"version":3,"sources":["Week.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Week.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"home-container\">\n    <div class=\"home-content\">\n      <el-row type=\"flex\" align=\"middle\">\n        <el-col :span=\"8\">\n          <el-select\n            v-model=\"selectedValue\"\n            placeholder=\"请选择\"\n            @change=\"selectChanged\"\n          >\n            <el-option\n              v-for=\"item in selectOptions\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            >\n            </el-option>\n          </el-select>\n        </el-col>\n        <el-col :span=\"8\">\n          <el-button size=\"mini\" @click=\"handleAdd\">新增时间段</el-button>\n        </el-col>\n        <el-col :span=\"8\">\n          <el-button size=\"mini\" @click=\"handleUpdate\">保存</el-button>\n        </el-col>\n      </el-row>\n      <el-table\n        :data=\"data.period\"\n        :default-sort=\"{ prop: 'startHour' }\"\n        height=\"450\"\n        border\n        style=\"margin-top: 10px\"\n      >\n        <el-table-column prop=\"name\" label=\"开始时\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-input type=\"number\" v-model=\"scope.row.startHour\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"price\" label=\"开始分\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-input type=\"number\" v-model=\"scope.row.startMinute\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"value\" label=\"结束时\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-input type=\"number\" v-model=\"scope.row.endHour\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"type\" label=\"结束分\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-input type=\"number\" v-model=\"scope.row.endMinute\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"type\" label=\"半场价格\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-input type=\"number\" v-model=\"scope.row.halfPrice\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"type\" label=\"全场价格\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-input type=\"number\" v-model=\"scope.row.fullPrice\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"150\">\n          <template slot-scope=\"scope\">\n            <el-button\n              @click=\"handleDelete(scope.$index)\"\n              size=\"mini\"\n              type=\"danger\"\n              >删除</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable quotes */\n/* eslint-disable indent */\n/* eslint-disable semi */\n/* eslint-disable radix */\n/* eslint-disable no-underscore-dangle */\nimport { getDataWithId, updateInfo } from \"@/api\";\n\nexport default {\n  name: \"week\",\n  data() {\n    return {\n      data: {},\n      datas: [],\n      newData: [{}],\n      collection: \"week\",\n      selectOptions: [\n        { value: \"0\", label: \"星期日\" },\n        { value: \"1\", label: \"星期一\" },\n        { value: \"2\", label: \"星期二\" },\n        { value: \"3\", label: \"星期三\" },\n        { value: \"4\", label: \"星期四\" },\n        { value: \"5\", label: \"星期五\" },\n        { value: \"6\", label: \"星期六\" },\n      ],\n      selectedValue: \"0\",\n    };\n  },\n  created() {\n    getDataWithId(this.$data.collection, this.$data.selectedValue).then(\n      (res) => {\n        console.log(res);\n        this.$data.data = res.data[0];\n      }\n    );\n  },\n  methods: {\n    handleUpdate() {\n      this.$confirm(\"是否提交修改\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          this.$data.data.period.forEach((element) => {\n            element.startHour = parseInt(element.startHour);\n            element.endHour = parseInt(element.endHour);\n            element.halfPrice = parseInt(element.halfPrice);\n            element.fullPrice = parseInt(element.fullPrice);\n            element.startMinute = parseInt(element.startMinute);\n            element.endMinute = parseInt(element.endMinute);\n          });\n          this.$data.data.period.sort((a, b) => a.startHour - b.startHour);\n          updateInfo(this.$data.data, this.$data.collection).then((res) => {\n            if (res.updated == 1) {\n              this.$message({\n                type: \"success\",\n                message: \"已保存!\",\n              });\n              // this.$router.go(0);\n            } else {\n              // this.$router.go(0);\n              this.$message({\n                type: \"fail\",\n                message: \"保存失败!\",\n              });\n            }\n          });\n        })\n        .catch((err) => {\n          console.log(err);\n          this.$router.go(0);\n          this.$message({\n            type: \"info\",\n            message: \"保存失败\",\n          });\n        });\n    },\n    handleDelete(index) {\n      this.$confirm(\"是否删除当前时间段\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      }).then(() => {\n        console.log(index);\n        this.$data.data.period.splice(index, 1);\n        console.log(this.$data.data);\n        // deleteInfo(info, this.$data.collection).then(() => {\n        //   this.$router.go(0);\n        // });\n      });\n    },\n    handleAdd() {\n      this.$data.data.period.push({});\n    },\n    selectChanged(value) {\n      console.log(value, this.$data.selectOptions[value]);\n      getDataWithId(this.$data.collection, this.$data.selectedValue).then(\n        (res) => {\n          console.log(res);\n          this.$data.data = res.data[0];\n        }\n      );\n    },\n  },\n};\n</script>\n\n<style scoped>\n.home-container {\n  padding: 10px;\n  padding-top: 5px;\n}\n.home-content {\n  padding: 10px;\n  border-radius: 5px;\n  background: #fff;\n}\n</style>"]}]}